(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{hMZU:function(n,e,t){"use strict";t.r(e),t.d(e,"AddonNotificationsSettingsLazyModule",(function(){return V}));var o=t("tyNb"),i=t("L3Fv"),c=t("mrSG"),_=t("BBqZ"),a=t("ANhT"),r=t("9+EE"),s=t("3LXp"),g=t("bFG1"),l=t("4pns"),d=t("c6ZJ"),p=t("BaYo"),f=t("93ts"),m=t("fjkH"),u=t("yjU1"),N=t("ssuw"),P=t("pHTc"),h=t("fXoL"),S=t("TEn/"),A=t("ACV2"),T=t("fQ68"),O=t("ofXK"),y=t("nt/U"),b=t("PgjG"),E=t("8/N+"),D=t("3Pt+"),v=t("3zv0"),M=t("sYmb");function AddonNotificationsSettingsPage_core_context_menu_item_12_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"core-context-menu-item",12),h.Mc("action",(function AddonNotificationsSettingsPage_core_context_menu_item_12_Template_core_context_menu_item_action_0_listener(){h.fd(n);const t=e.$implicit;return h.Oc().openExtraPreferences(t)})),h.Pc(1,"translate"),h.Dc()}if(2&n){const n=e.$implicit;h.Vc("priority",n.priority)("content",h.Qc(1,3,n.label))("iconAction",n.icon)}}function AddonNotificationsSettingsPage_ion_item_19_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"ion-item",13),h.Ec(1,"ion-label"),h.Ec(2,"p",14),h.pd(3),h.Pc(4,"translate"),h.Dc(),h.Dc(),h.Ec(5,"ion-toggle",15),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_19_Template_ion_toggle_ngModelChange_5_listener(e){h.fd(n);return h.Oc().preferences.enableall=e}))("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_19_Template_ion_toggle_ngModelChange_5_listener(){h.fd(n);const e=h.Oc();return e.enableAll(e.preferences.enableall)})),h.Dc(),h.Dc()}if(2&n){const n=h.Oc();h.lc(3),h.qd(h.Qc(4,2,"addon.notifications.allownotifications")),h.lc(2),h.Vc("ngModel",n.preferences.enableall)}}function AddonNotificationsSettingsPage_ion_item_20_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"ion-item",13),h.Ec(1,"ion-label"),h.Ec(2,"p",14),h.pd(3),h.Pc(4,"translate"),h.Dc(),h.Dc(),h.Ec(5,"ion-toggle",15),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_20_Template_ion_toggle_ngModelChange_5_listener(e){h.fd(n);return h.Oc().notificationSound=e}))("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_20_Template_ion_toggle_ngModelChange_5_listener(){h.fd(n);const e=h.Oc();return e.changeNotificationSound(e.notificationSound)})),h.Dc(),h.Dc()}if(2&n){const n=h.Oc();h.lc(3),h.qd(h.Qc(4,2,"addon.notifications.playsound")),h.lc(2),h.Vc("ngModel",n.notificationSound)}}function AddonNotificationsSettingsPage_ion_item_22_ion_select_option_6_Template(n,e){if(1&n&&(h.Ec(0,"ion-select-option",20),h.pd(1),h.Dc()),2&n){const n=e.$implicit;h.Vc("value",n.name),h.lc(1),h.rd(" ",n.displayname," ")}}function AddonNotificationsSettingsPage_ion_item_22_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"ion-item",16),h.Ec(1,"ion-label",17),h.Ec(2,"p",14),h.pd(3),h.Pc(4,"translate"),h.Dc(),h.Dc(),h.Ec(5,"ion-select",18),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ion_item_22_Template_ion_select_ngModelChange_5_listener(e){h.fd(n);return h.Oc().currentProcessorName=e}))("ionChange",(function AddonNotificationsSettingsPage_ion_item_22_Template_ion_select_ionChange_5_listener(e){h.fd(n);return h.Oc().changeProcessor(e)})),h.nd(6,AddonNotificationsSettingsPage_ion_item_22_ion_select_option_6_Template,2,2,"ion-select-option",19),h.Dc(),h.Dc()}if(2&n){const n=h.Oc();h.Vc("button",!1),h.lc(3),h.qd(h.Qc(4,4,"addon.notifications.typeofnotification")),h.lc(2),h.Vc("ngModel",n.currentProcessorName),h.lc(1),h.Vc("ngForOf",null==n.preferences?null:n.preferences.processors)}}function AddonNotificationsSettingsPage_ng_container_23_ng_container_1_Template(n,e){1&n&&h.Ac(0)}const _c0=function(n){return{preferences:n}};function AddonNotificationsSettingsPage_ng_container_23_Template(n,e){if(1&n&&(h.Cc(0),h.nd(1,AddonNotificationsSettingsPage_ng_container_23_ng_container_1_Template,1,0,"ng-container",21),h.Bc()),2&n){const n=h.Oc(),e=h.ed(26);h.lc(1),h.Vc("ngTemplateOutlet",e)("ngTemplateOutletContext",h.ad(2,_c0,n.preferences))}}function AddonNotificationsSettingsPage_ng_container_24_ng_container_1_Template(n,e){1&n&&h.Ac(0)}function AddonNotificationsSettingsPage_ng_container_24_Template(n,e){if(1&n&&(h.Cc(0),h.nd(1,AddonNotificationsSettingsPage_ng_container_24_ng_container_1_Template,1,0,"ng-container",21),h.Bc()),2&n){const n=h.Oc(),e=h.ed(28);h.lc(1),h.Vc("ngTemplateOutlet",e)("ngTemplateOutletContext",h.ad(2,_c0,n.preferences))}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"core-button-with-spinner",37),h.Ec(1,"ion-toggle",38),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template_ion_toggle_ngModelChange_1_listener(e){h.fd(n);const t=h.Oc(2).$implicit,o=h.Oc().$implicit,i=h.Oc(3);return o.processorsByName[i.currentProcessorName][t].checked=e}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template_ion_toggle_ngModelChange_1_listener(){h.fd(n);const e=h.Oc(2).$implicit,t=h.Oc().$implicit;return h.Oc(3).changePreferenceLegacy(t,e)})),h.Dc(),h.Dc()}if(2&n){const n=h.Oc(2).$implicit,e=h.Oc().$implicit,t=h.Oc(3);h.Vc("loading",e.processorsByName[t.currentProcessorName][n].updating),h.lc(1),h.Vc("ngModel",e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_2_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_3_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_Template(n,e){if(1&n&&(h.Cc(0),h.nd(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36),h.nd(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_2_Template,3,3,"span",35),h.nd(3,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_span_3_Template,3,3,"span",35),h.Bc()),2&n){const n=h.Oc().$implicit,e=h.Oc().$implicit,t=h.Oc(3);h.lc(1),h.Vc("ngIf",!e.processorsByName[t.currentProcessorName].locked),h.lc(1),h.Vc("ngIf",e.processorsByName[t.currentProcessorName].locked&&e.processorsByName[t.currentProcessorName][n].checked),h.lc(1),h.Vc("ngIf",e.processorsByName[t.currentProcessorName].locked&&!e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_span_2_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.qd(h.Qc(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_Template(n,e){if(1&n&&(h.Ec(0,"ion-col",34),h.nd(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_ng_container_1_Template,4,3,"ng-container",9),h.nd(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_span_2_Template,3,3,"span",35),h.Dc()),2&n){const n=e.$implicit,t=h.Oc().$implicit,o=h.Oc(2).preferences,i=h.Oc();h.lc(1),h.Vc("ngIf",o.enableall&&t.processorsByName[i.currentProcessorName][n]),h.lc(1),h.Vc("ngIf",!o.enableall)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"ion-toggle",38),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(e){h.fd(n);const t=h.Oc(3).$implicit,o=h.Oc().$implicit,i=h.Oc(3);return o.processorsByName[i.currentProcessorName][t].checked=e}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(){h.fd(n);const e=h.Oc(3).$implicit,t=h.Oc().$implicit;return h.Oc(3).changePreferenceLegacy(t,e)})),h.Dc()}if(2&n){const n=h.Oc(3).$implicit,e=h.Oc().$implicit,t=h.Oc(3);h.Vc("ngModel",e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_Template(n,e){if(1&n&&(h.Ec(0,"core-button-with-spinner",37),h.nd(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_ion_toggle_1_Template,1,1,"ion-toggle",44),h.Dc()),2&n){const n=h.Oc(2).$implicit,e=h.Oc().$implicit,t=h.Oc(3);h.Vc("loading",e.processorsByName[t.currentProcessorName][n].updating),h.lc(1),h.Vc("ngIf",!e.processorsByName[t.currentProcessorName].locked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_2_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_3_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_Template(n,e){if(1&n&&(h.Ec(0,"div",2),h.nd(1,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36),h.nd(2,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_2_Template,3,3,"span",35),h.nd(3,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_span_3_Template,3,3,"span",35),h.Dc()),2&n){const n=h.Oc().$implicit,e=h.Oc().$implicit,t=h.Oc(3);h.lc(1),h.Vc("ngIf",!e.processorsByName[t.currentProcessorName].locked),h.lc(1),h.Vc("ngIf",e.processorsByName[t.currentProcessorName].locked&&e.processorsByName[t.currentProcessorName][n].checked),h.lc(1),h.Vc("ngIf",e.processorsByName[t.currentProcessorName].locked&&!e.processorsByName[t.currentProcessorName][n].checked)}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_span_6_Template(n,e){1&n&&(h.Ec(0,"span",45),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.qd(h.Qc(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_Template(n,e){if(1&n&&(h.Ec(0,"ion-item",40),h.Ec(1,"ion-label",41),h.Ec(2,"p"),h.pd(3),h.Pc(4,"translate"),h.Dc(),h.Dc(),h.nd(5,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_div_5_Template,4,3,"div",42),h.nd(6,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_span_6_Template,3,3,"span",43),h.Dc()),2&n){const n=e.$implicit,t=h.Oc().$implicit,o=h.Oc(2).preferences,i=h.Oc();h.lc(3),h.qd(h.Qc(4,3,"core.settings."+n)),h.lc(2),h.Vc("ngIf",o.enableall&&t.processorsByName[i.currentProcessorName][n]),h.lc(1),h.Vc("ngIf",!o.enableall)}}const _c1=function(){return["loggedin","loggedoff"]};function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_Template(n,e){if(1&n&&(h.Cc(0),h.Ec(1,"ion-item",28),h.Ec(2,"ion-label"),h.Ec(3,"ion-row",29),h.Ec(4,"ion-col",30),h.Ec(5,"p",14),h.pd(6),h.Dc(),h.Dc(),h.nd(7,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_col_7_Template,3,2,"ion-col",31),h.Dc(),h.Dc(),h.Dc(),h.Ec(8,"ion-item",32),h.Ec(9,"ion-label"),h.Ec(10,"p",14),h.pd(11),h.Dc(),h.Dc(),h.Dc(),h.nd(12,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_ion_item_12_Template,7,5,"ion-item",33),h.Bc()),2&n){const n=e.$implicit;h.lc(6),h.qd(n.displayname),h.lc(1),h.Vc("ngForOf",h.Zc(4,_c1)),h.lc(4),h.qd(n.displayname),h.lc(1),h.Vc("ngForOf",h.Zc(5,_c1))}}function AddonNotificationsSettingsPage_ng_template_25_ng_container_0_Template(n,e){if(1&n&&(h.Cc(0,23),h.Ec(1,"ion-card-header",24),h.Ec(2,"ion-item",25),h.Ec(3,"ion-label",13),h.Ec(4,"ion-row",24),h.Ec(5,"ion-col",24),h.Ec(6,"p",14),h.pd(7),h.Dc(),h.Dc(),h.Ec(8,"ion-col",26),h.Ec(9,"p"),h.pd(10),h.Pc(11,"translate"),h.Dc(),h.Dc(),h.Ec(12,"ion-col",26),h.Ec(13,"p"),h.pd(14),h.Pc(15,"translate"),h.Dc(),h.Dc(),h.Dc(),h.Dc(),h.Dc(),h.Dc(),h.nd(16,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_ng_container_16_Template,13,6,"ng-container",27),h.Bc()),2&n){const n=e.$implicit;h.lc(7),h.qd(n.displayname),h.lc(3),h.qd(h.Qc(11,4,"core.settings.loggedin")),h.lc(4),h.qd(h.Qc(15,6,"core.settings.loggedoff")),h.lc(2),h.Vc("ngForOf",n.notifications)}}function AddonNotificationsSettingsPage_ng_template_25_Template(n,e){if(1&n&&h.nd(0,AddonNotificationsSettingsPage_ng_template_25_ng_container_0_Template,17,8,"ng-container",22),2&n){const n=h.Oc();h.Vc("ngForOf",n.components)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template(n,e){if(1&n){const n=h.Fc();h.Ec(0,"ion-toggle",38),h.Mc("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(e){h.fd(n);const t=h.Oc(3).$implicit,o=h.Oc(3);return t.processorsByName[o.currentProcessorName].enabled=e}))("ngModelChange",(function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template_ion_toggle_ngModelChange_0_listener(){h.fd(n);const e=h.Oc(3).$implicit;return h.Oc(3).changePreference(e)})),h.Dc()}if(2&n){const n=h.Oc(3).$implicit,e=h.Oc(3);h.Vc("ngModel",n.processorsByName[e.currentProcessorName].enabled)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_Template(n,e){if(1&n&&(h.Ec(0,"core-button-with-spinner",37),h.nd(1,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_ion_toggle_1_Template,1,1,"ion-toggle",44),h.Dc()),2&n){const n=h.Oc(2).$implicit,e=h.Oc(3);h.Vc("loading",n.processorsByName[e.currentProcessorName].updating),h.lc(1),h.Vc("ngIf",!n.processorsByName[e.currentProcessorName].locked)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_2_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.forced")," "))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_3_Template(n,e){1&n&&(h.Ec(0,"span",39),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.rd(" ",h.Qc(2,1,"core.settings.disallowed")," "))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_Template(n,e){if(1&n&&(h.Ec(0,"div",2),h.nd(1,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_core_button_with_spinner_1_Template,2,2,"core-button-with-spinner",36),h.nd(2,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_2_Template,3,3,"span",35),h.nd(3,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_span_3_Template,3,3,"span",35),h.Dc()),2&n){const n=h.Oc().$implicit,e=h.Oc(3);h.lc(1),h.Vc("ngIf",!n.processorsByName[e.currentProcessorName].locked),h.lc(1),h.Vc("ngIf",n.processorsByName[e.currentProcessorName].locked&&n.processorsByName[e.currentProcessorName].enabled),h.lc(1),h.Vc("ngIf",n.processorsByName[e.currentProcessorName].locked&&!n.processorsByName[e.currentProcessorName].enabled)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_span_6_Template(n,e){1&n&&(h.Ec(0,"span",45),h.pd(1),h.Pc(2,"translate"),h.Dc()),2&n&&(h.lc(1),h.qd(h.Qc(2,1,"core.settings.disabled")))}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_Template(n,e){if(1&n&&(h.Cc(0),h.Ec(1,"ion-item",13),h.Ec(2,"ion-label"),h.Ec(3,"p"),h.pd(4),h.Dc(),h.Dc(),h.nd(5,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_div_5_Template,4,3,"div",42),h.nd(6,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_span_6_Template,3,3,"span",43),h.Dc(),h.Bc()),2&n){const n=e.$implicit,t=h.Oc(2).preferences;h.lc(4),h.qd(n.displayname),h.lc(1),h.Vc("ngIf",t.enableall),h.lc(1),h.Vc("ngIf",!t.enableall)}}function AddonNotificationsSettingsPage_ng_template_27_ng_container_0_Template(n,e){if(1&n&&(h.Cc(0,23),h.Ec(1,"ion-item-divider",13),h.Ec(2,"ion-label"),h.Ec(3,"p",14),h.pd(4),h.Dc(),h.Dc(),h.Dc(),h.nd(5,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_ng_container_5_Template,7,3,"ng-container",27),h.Bc()),2&n){const n=e.$implicit;h.lc(4),h.qd(n.displayname),h.lc(1),h.Vc("ngForOf",n.notifications)}}function AddonNotificationsSettingsPage_ng_template_27_Template(n,e){if(1&n&&h.nd(0,AddonNotificationsSettingsPage_ng_template_27_ng_container_0_Template,6,2,"ng-container",22),2&n){const n=h.Oc();h.Vc("ngForOf",n.components)}}let w=(()=>{class AddonNotificationsSettingsPage{constructor(){this.currentProcessorName="airnotifier",this.preferencesLoaded=!1,this.notificationSound=!1,this.processorHandlers=[],this.loggedInOffLegacyMode=!1,this.canChangeSound=a.a.canDisableSound();const n=r.c.getRequiredCurrentSite();this.loggedInOffLegacyMode=!n.isVersionGreaterEqualThan("4.0")}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.canChangeSound&&(this.notificationSound=yield _.a.get(p.a.SETTINGS_NOTIFICATION_SOUND,!0)),this.fetchPreferences()}))}fetchPreferences(){return Object(c.a)(this,void 0,void 0,(function*(){try{const n=yield u.a.getNotificationPreferences();let e=n.processors.find((n=>n.name==this.currentProcessorName));if(e||(e=n.processors[0]),!e)throw new f.a("No processor found");n.enableall=!n.disableall,this.preferences=N.a.formatPreferences(n),this.loadProcessor(e)}catch(n){s.a.showErrorModal(n)}finally{this.preferencesLoaded=!0}}))}loadProcessor(n){var e;if(!n)return;if(this.currentProcessorName=n.name,this.processorHandlers=[],this.components=N.a.getProcessorComponents(n.name,(null===(e=this.preferences)||void 0===e?void 0:e.components)||[]),!n.hassettings||!n.supported)return;const t=d.a.getDisplayData(n);t&&this.processorHandlers.push(t)}updatePreferencesAfterDelay(){clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout((()=>{this.updateTimeout=void 0,this.updatePreferences()}),5e3)}updatePreferences(){return Object(c.a)(this,void 0,void 0,(function*(){yield g.a.ignoreErrors(u.a.invalidateNotificationPreferences()),yield u.a.getNotificationPreferences()}))}changeProcessor(n){var e;const t=null===(e=this.preferences)||void 0===e?void 0:e.processors.find((e=>e.name==n));t&&this.loadProcessor(t)}refreshPreferences(n){return Object(c.a)(this,void 0,void 0,(function*(){try{yield g.a.ignoreErrors(u.a.invalidateNotificationPreferences()),yield this.fetchPreferences()}finally{null==n?void 0:n.complete()}}))}openExtraPreferences(n){P.a.navigateToSitePath(n.page,{params:n.pageParams})}changePreferenceLegacy(n,e){var t;return Object(c.a)(this,void 0,void 0,(function*(){const o=null===(t=n.processorsByName)||void 0===t?void 0:t[this.currentProcessorName];if(!o)return;const i=o[e],c=n.preferencekey+"_"+i.name;let _=n.processors.filter((n=>n[e].checked)).map((n=>n.name)).join(",");""==_&&(_="none"),i.updating=!0;try{yield l.a.updateUserPreference(c,_),this.updatePreferencesAfterDelay()}catch(n){s.a.showErrorModal(n),o[e].checked=!o[e].checked}finally{i.updating=!1}}))}changePreference(n){var e;return Object(c.a)(this,void 0,void 0,(function*(){const t=null===(e=n.processorsByName)||void 0===e?void 0:e[this.currentProcessorName];if(!t)return;const o=n.preferencekey+"_enabled";let i=n.processors.filter((n=>n.enabled)).map((n=>n.name)).join(",");""==i&&(i="none"),t.updating=!0;try{yield l.a.updateUserPreference(o,i),this.updatePreferencesAfterDelay()}catch(n){s.a.showErrorModal(n),t.enabled=!t.enabled}finally{t.updating=!1}}))}enableAll(n){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.preferences)return;const e=yield s.a.showModalLoading("core.sending",!0);try{l.a.updateUserPreferences([],!n),this.updatePreferencesAfterDelay()}catch(n){s.a.showErrorModal(n),this.preferences.enableall=!this.preferences.enableall}finally{e.dismiss()}}))}changeNotificationSound(n){return Object(c.a)(this,void 0,void 0,(function*(){yield g.a.ignoreErrors(_.a.set(p.a.SETTINGS_NOTIFICATION_SOUND,n?1:0));const e=r.c.getCurrentSiteId();m.b.trigger(m.b.NOTIFICATION_SOUND_CHANGED,{enabled:n},e),a.a.rescheduleAll()}))}ngOnDestroy(){this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updatePreferences())}}return AddonNotificationsSettingsPage.ɵfac=function AddonNotificationsSettingsPage_Factory(n){return new(n||AddonNotificationsSettingsPage)},AddonNotificationsSettingsPage.ɵcmp=h.sc({type:AddonNotificationsSettingsPage,selectors:[["page-addon-notifications-settings"]],decls:29,vars:17,consts:[["slot","start"],[3,"text"],["slot","end"],[3,"priority","content","iconAction","action",4,"ngFor","ngForOf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap only-links","lines","none",3,"button",4,"ngIf"],[4,"ngIf"],["legacySettings",""],["settings",""],[3,"priority","content","iconAction","action"],[1,"ion-text-wrap"],[1,"item-heading"],["slot","end",3,"ngModel","ngModelChange"],["lines","none",1,"ion-text-wrap","only-links",3,"button"],[1,"addon-notification-type-form"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],["class","ion-text-wrap",3,"value",4,"ngFor","ngForOf"],[1,"ion-text-wrap",3,"value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ion-margin-top",4,"ngFor","ngForOf"],[1,"ion-margin-top"],[1,"ion-no-padding"],[1,"ion-text-wrap","divider"],["size","2",1,"ion-text-center","ion-no-padding","ion-hide-md-down"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap","ion-hide-md-down","addon-notifications-table-content","only-links"],[1,"ion-no-padding","ion-align-items-center"],[1,"ion-margin-horizontal","ion-no-padding"],["size","2","class","ion-text-center ion-no-padding",4,"ngFor","ngForOf"],[1,"ion-text-wrap","ion-no-margin","ion-hide-md-up"],["class","ion-text-wrap ion-hide-md-up",4,"ngFor","ngForOf"],["size","2",1,"ion-text-center","ion-no-padding"],["class","text-gray",4,"ngIf"],[3,"loading",4,"ngIf"],[3,"loading"],[3,"ngModel","ngModelChange"],[1,"text-gray"],[1,"ion-text-wrap","ion-hide-md-up"],[1,"ion-margin-horizontal"],["slot","end",4,"ngIf"],["class","text-gray","slot","end",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["slot","end",1,"text-gray"]],template:function AddonNotificationsSettingsPage_Template(n,e){1&n&&(h.Ec(0,"ion-header"),h.Ec(1,"ion-toolbar"),h.Ec(2,"ion-buttons",0),h.zc(3,"ion-back-button",1),h.Pc(4,"translate"),h.Dc(),h.Ec(5,"ion-title"),h.Ec(6,"h1"),h.pd(7),h.Pc(8,"translate"),h.Dc(),h.Dc(),h.zc(9,"ion-buttons",2),h.Dc(),h.Dc(),h.Ec(10,"core-navbar-buttons",2),h.Ec(11,"core-context-menu"),h.nd(12,AddonNotificationsSettingsPage_core_context_menu_item_12_Template,2,5,"core-context-menu-item",3),h.Dc(),h.Dc(),h.Ec(13,"ion-content"),h.Ec(14,"ion-refresher",4),h.Mc("ionRefresh",(function AddonNotificationsSettingsPage_Template_ion_refresher_ionRefresh_14_listener(n){return e.refreshPreferences(n.target)})),h.zc(15,"ion-refresher-content",5),h.Pc(16,"translate"),h.Dc(),h.Ec(17,"core-loading",6),h.Ec(18,"ion-card"),h.nd(19,AddonNotificationsSettingsPage_ion_item_19_Template,6,4,"ion-item",7),h.nd(20,AddonNotificationsSettingsPage_ion_item_20_Template,6,4,"ion-item",7),h.Dc(),h.Ec(21,"ion-card"),h.nd(22,AddonNotificationsSettingsPage_ion_item_22_Template,7,6,"ion-item",8),h.nd(23,AddonNotificationsSettingsPage_ng_container_23_Template,2,4,"ng-container",9),h.nd(24,AddonNotificationsSettingsPage_ng_container_24_Template,2,4,"ng-container",9),h.Dc(),h.Dc(),h.Dc(),h.nd(25,AddonNotificationsSettingsPage_ng_template_25_Template,1,1,"ng-template",null,10,h.od),h.nd(27,AddonNotificationsSettingsPage_ng_template_27_Template,1,1,"ng-template",null,11,h.od)),2&n&&(h.lc(3),h.Vc("text",h.Qc(4,11,"core.back")),h.lc(4),h.qd(h.Qc(8,13,"addon.notifications.notifications")),h.lc(5),h.Vc("ngForOf",e.processorHandlers),h.lc(2),h.Vc("disabled",!e.preferencesLoaded),h.lc(1),h.Wc("pullingText",h.Qc(16,15,"core.pulltorefresh")),h.lc(2),h.Vc("hideUntil",e.preferencesLoaded),h.lc(2),h.Vc("ngIf",e.preferences),h.lc(1),h.Vc("ngIf",e.canChangeSound),h.lc(2),h.Vc("ngIf",null==e.preferences||null==e.preferences.processors?null:e.preferences.processors.length),h.lc(1),h.Vc("ngIf",e.loggedInOffLegacyMode),h.lc(1),h.Vc("ngIf",!e.loggedInOffLegacyMode))},directives:[S.C,S.Ab,S.m,S.h,S.i,S.yb,A.a,T.a,O.s,y.a,S.v,S.bb,S.cb,b.a,S.n,O.t,E.a,S.I,S.O,S.zb,S.d,D.r,D.u,S.lb,S.Ob,S.mb,O.A,S.p,S.hb,S.u,v.a,S.J],pipes:[M.d],styles:[".addon-notifications-table-content[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{min-height:35px}ion-card-header[_ngcontent-%COMP%], ion-item-divider[_ngcontent-%COMP%]{border-top:1px solid var(--stroke)}"]}),AddonNotificationsSettingsPage})();const C=[{path:"",component:w}];let V=(()=>{class AddonNotificationsSettingsLazyModule{}return AddonNotificationsSettingsLazyModule.ɵmod=h.wc({type:AddonNotificationsSettingsLazyModule}),AddonNotificationsSettingsLazyModule.ɵinj=h.vc({factory:function AddonNotificationsSettingsLazyModule_Factory(n){return new(n||AddonNotificationsSettingsLazyModule)},imports:[[o.m.forChild(C),i.a],o.m]}),AddonNotificationsSettingsLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&h.kd(V,{declarations:[w],imports:[o.m,i.a],exports:[o.m]}))}}]);